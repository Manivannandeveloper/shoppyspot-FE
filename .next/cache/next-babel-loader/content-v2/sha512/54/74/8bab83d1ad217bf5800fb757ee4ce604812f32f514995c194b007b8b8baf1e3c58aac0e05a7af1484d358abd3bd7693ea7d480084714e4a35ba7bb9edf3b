{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useContext, useState } from \"react\";\nimport { Media, Container, Form, Row, Input, Col } from \"reactstrap\";\nimport { PayPalButton } from \"react-paypal-button\";\nimport CartContext from \"../../../../helpers/cart\";\nimport paypal from \"../../../../public/assets/images/paypal.png\";\nimport { useForm } from \"react-hook-form\";\nimport { useRouter } from \"next/router\";\nimport { CurrencyContext } from \"../../../../helpers/Currency/CurrencyContext\";\n\nconst CheckoutPage = () => {\n  const cartContext = useContext(CartContext);\n  const cartItems = cartContext.state;\n  const cartTotal = cartContext.cartTotal;\n  const curContext = useContext(CurrencyContext);\n  const symbol = curContext.state.symbol;\n  const {\n    0: obj,\n    1: setObj\n  } = useState({});\n  const {\n    0: payment,\n    1: setPayment\n  } = useState(\"stripe\");\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm(); // initialise the hook\n\n  const router = useRouter();\n\n  const checkhandle = value => {\n    setPayment(value);\n  };\n\n  const onSuccess = payment => {\n    router.push({\n      pathname: \"/page/order-success\",\n      state: {\n        payment: payment,\n        items: cartItems,\n        orderTotal: total,\n        symbol: symbol\n      }\n    });\n  };\n\n  const onSubmit = data => {\n    if (data !== \"\") {\n      alert(\"You submitted the form and stuff!\");\n      router.push({\n        pathname: \"/page/order-success\",\n        state: {\n          items: cartItems,\n          orderTotal: cartTotal,\n          symbol: symbol\n        }\n      });\n    } else {\n      errors.showMessages();\n    }\n  };\n\n  const setStateFromInput = event => {\n    obj[event.target.name] = event.target.value;\n    setObj(obj);\n  };\n\n  const onCancel = data => {\n    console.log(\"The payment was cancelled!\", data);\n  };\n\n  const onError = err => {\n    console.log(\"Error!\", err);\n  };\n\n  const paypalOptions = {\n    clientId: \"AZ4S98zFa01vym7NVeo_qthZyOnBhtNvQDsjhaZSMH-2_Y9IAJFbSD3HPueErYqN8Sa8WYRbjP7wWtd_\"\n  };\n  return __jsx(\"section\", {\n    className: \"section-b-space\"\n  }, __jsx(Container, null, __jsx(\"div\", {\n    className: \"checkout-page\"\n  }, __jsx(\"div\", {\n    className: \"checkout-form\"\n  }, __jsx(Form, {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(Row, null, __jsx(Col, {\n    lg: \"6\",\n    sm: \"12\",\n    xs: \"12\"\n  }, __jsx(\"div\", {\n    className: \"checkout-title\"\n  }, __jsx(\"h3\", null, \"Billing Details\")), __jsx(\"div\", {\n    className: \"row check-out\"\n  }, __jsx(\"div\", {\n    className: \"form-group col-md-6 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"First Name\"), __jsx(\"input\", {\n    type: \"text\",\n    className: `${errors.firstName ? \"error_border\" : \"\"}`,\n    name: \"first_name\",\n    ref: register({\n      required: true\n    })\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.firstName && \"First name is required\")), __jsx(\"div\", {\n    className: \"form-group col-md-6 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Last Name\"), __jsx(\"input\", {\n    type: \"text\",\n    className: `${errors.last_name ? \"error_border\" : \"\"}`,\n    name: \"last_name\",\n    ref: register({\n      required: true\n    })\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.last_name && \"Last name is required\")), __jsx(\"div\", {\n    className: \"form-group col-md-6 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Phone\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"phone\",\n    className: `${errors.phone ? \"error_border\" : \"\"}`,\n    ref: register({\n      pattern: /\\d+/\n    })\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.phone && \"Please enter number for phone.\")), __jsx(\"div\", {\n    className: \"form-group col-md-6 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Email Address\"), __jsx(\"input\", {\n    className: \"form-control\",\n    className: `${errors.email ? \"error_border\" : \"\"}`,\n    type: \"text\",\n    name: \"email\",\n    ref: register({\n      required: true,\n      pattern: /^\\S+@\\S+$/i\n    })\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.email && \"Please enter proper email address .\")), __jsx(\"div\", {\n    className: \"form-group col-md-12 col-sm-12 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Country\"), __jsx(\"select\", {\n    name: \"country\",\n    ref: register({\n      required: true\n    })\n  }, __jsx(\"option\", null, \"India\"), __jsx(\"option\", null, \"South Africa\"), __jsx(\"option\", null, \"United State\"), __jsx(\"option\", null, \"Australia\"))), __jsx(\"div\", {\n    className: \"form-group col-md-12 col-sm-12 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Address\"), __jsx(\"input\", {\n    className: \"form-control\",\n    className: `${errors.address ? \"error_border\" : \"\"}`,\n    type: \"text\",\n    name: \"address\",\n    ref: register({\n      required: true,\n      min: 20,\n      max: 120\n    }),\n    placeholder: \"Street address\"\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.address && \"Please right your address .\")), __jsx(\"div\", {\n    className: \"form-group col-md-12 col-sm-12 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Town/City\"), __jsx(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    className: `${errors.city ? \"error_border\" : \"\"}`,\n    name: \"city\",\n    ref: register({\n      required: true\n    }),\n    onChange: setStateFromInput\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.city && \"select one city\")), __jsx(\"div\", {\n    className: \"form-group col-md-12 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"State / County\"), __jsx(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    className: `${errors.state ? \"error_border\" : \"\"}`,\n    name: \"state\",\n    ref: register({\n      required: true\n    }),\n    onChange: setStateFromInput\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.state && \"select one state\")), __jsx(\"div\", {\n    className: \"form-group col-md-12 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Postal Code\"), __jsx(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    name: \"pincode\",\n    className: `${errors.pincode ? \"error_border\" : \"\"}`,\n    ref: register({\n      pattern: /\\d+/\n    })\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.pincode && \"Required integer\")), __jsx(\"div\", {\n    className: \"form-group col-lg-12 col-md-12 col-sm-12 col-xs-12\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    name: \"create_account\",\n    id: \"account-option\"\n  }), \"\\u2002\", \" \", __jsx(\"label\", {\n    htmlFor: \"account-option\"\n  }, \"Create An Account?\")))), __jsx(Col, {\n    lg: \"6\",\n    sm: \"12\",\n    xs: \"12\"\n  }, cartItems && cartItems.length > 0 > 0 ? __jsx(\"div\", {\n    className: \"checkout-details\"\n  }, __jsx(\"div\", {\n    className: \"order-box\"\n  }, __jsx(\"div\", {\n    className: \"title-box\"\n  }, __jsx(\"div\", null, \"Product \", __jsx(\"span\", null, \"Total\"))), __jsx(\"ul\", {\n    className: \"qty\"\n  }, cartItems.map((item, index) => __jsx(\"li\", {\n    key: index\n  }, item.title, \" \\xD7 \", item.qty, \" \", __jsx(\"span\", null, symbol, item.total)))), __jsx(\"ul\", {\n    className: \"sub-total\"\n  }, __jsx(\"li\", null, \"Subtotal\", \" \", __jsx(\"span\", {\n    className: \"count\"\n  }, symbol, cartTotal)), __jsx(\"li\", null, \"Shipping\", __jsx(\"div\", {\n    className: \"shipping\"\n  }, __jsx(\"div\", {\n    className: \"shopping-option\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    name: \"free-shipping\",\n    id: \"free-shipping\"\n  }), __jsx(\"label\", {\n    htmlFor: \"free-shipping\"\n  }, \"Free Shipping\")), __jsx(\"div\", {\n    className: \"shopping-option\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    name: \"local-pickup\",\n    id: \"local-pickup\"\n  }), __jsx(\"label\", {\n    htmlFor: \"local-pickup\"\n  }, \"Local Pickup\"))))), __jsx(\"ul\", {\n    className: \"total\"\n  }, __jsx(\"li\", null, \"Total\", \" \", __jsx(\"span\", {\n    className: \"count\"\n  }, symbol, cartTotal)))), __jsx(\"div\", {\n    className: \"payment-box\"\n  }, __jsx(\"div\", {\n    className: \"upper-box\"\n  }, __jsx(\"div\", {\n    className: \"payment-options\"\n  }, __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(\"div\", {\n    className: \"radio-option stripe\"\n  }, __jsx(\"input\", {\n    type: \"radio\",\n    name: \"payment-group\",\n    id: \"payment-2\",\n    defaultChecked: true,\n    onClick: () => checkhandle(\"stripe\")\n  }), __jsx(\"label\", {\n    htmlFor: \"payment-2\"\n  }, \"Stripe\"))), __jsx(\"li\", null, __jsx(\"div\", {\n    className: \"radio-option paypal\"\n  }, __jsx(\"input\", {\n    type: \"radio\",\n    name: \"payment-group\",\n    id: \"payment-1\",\n    onClick: () => checkhandle(\"paypal\")\n  }), __jsx(\"label\", {\n    htmlFor: \"payment-1\"\n  }, \"PayPal\", __jsx(\"span\", {\n    className: \"image\"\n  }, __jsx(Media, {\n    src: paypal,\n    alt: \"\"\n  })))))))), cartTotal !== 0 ? __jsx(\"div\", {\n    className: \"text-right\"\n  }, payment === \"stripe\" ? __jsx(\"button\", {\n    type: \"submit\",\n    className: \"btn-solid btn\"\n  }, \"Place Order\") : __jsx(PayPalButton, {\n    paypalOptions: paypalOptions,\n    amount: cartTotal,\n    onPaymentSuccess: onSuccess,\n    onPaymentError: onError,\n    onApprove: onSuccess,\n    onPaymentCancel: onCancel\n  })) : \"\")) : \"\")))))));\n};\n\nexport default CheckoutPage;","map":null,"metadata":{},"sourceType":"module"}