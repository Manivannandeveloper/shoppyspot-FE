{"ast":null,"code":"import _defineProperty from \"C:/Users/beman/Downloads/multikart/multikart/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { useContext, useState } from \"react\";\nimport { Media, Container, Form, Row, Input, Col } from \"reactstrap\";\nimport { PayPalButton } from \"react-paypal-button\";\nimport CartContext from \"../../../../helpers/cart\";\nimport paypal from \"../../../../public/assets/images/paypal.png\";\nimport { useForm } from \"react-hook-form\";\nimport { useRouter } from \"next/router\";\nimport { CurrencyContext } from \"../../../../helpers/Currency/CurrencyContext\";\n\nvar CheckoutPage = function CheckoutPage() {\n  var _jsx, _jsx2, _jsx3, _jsx4, _jsx5;\n\n  var cartContext = useContext(CartContext);\n  var cartItems = cartContext.state;\n  var cartTotal = cartContext.cartTotal;\n  var curContext = useContext(CurrencyContext);\n  var symbol = curContext.state.symbol;\n\n  var _useState = useState({}),\n      obj = _useState[0],\n      setObj = _useState[1];\n\n  var _useState2 = useState(\"stripe\"),\n      payment = _useState2[0],\n      setPayment = _useState2[1];\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors; // initialise the hook\n\n\n  var router = useRouter();\n\n  var checkhandle = function checkhandle(value) {\n    setPayment(value);\n  };\n\n  var onSuccess = function onSuccess(payment) {\n    router.push({\n      pathname: \"/page/order-success\",\n      state: {\n        payment: payment,\n        items: cartItems,\n        orderTotal: total,\n        symbol: symbol\n      }\n    });\n  };\n\n  var onSubmit = function onSubmit(data) {\n    if (data !== \"\") {\n      alert(\"You submitted the form and stuff!\");\n      router.push({\n        pathname: \"/page/order-success\",\n        state: {\n          items: cartItems,\n          orderTotal: cartTotal,\n          symbol: symbol\n        }\n      });\n    } else {\n      errors.showMessages();\n    }\n  };\n\n  var setStateFromInput = function setStateFromInput(event) {\n    obj[event.target.name] = event.target.value;\n    setObj(obj);\n  };\n\n  var onCancel = function onCancel(data) {\n    console.log(\"The payment was cancelled!\", data);\n  };\n\n  var onError = function onError(err) {\n    console.log(\"Error!\", err);\n  };\n\n  var paypalOptions = {\n    clientId: \"AZ4S98zFa01vym7NVeo_qthZyOnBhtNvQDsjhaZSMH-2_Y9IAJFbSD3HPueErYqN8Sa8WYRbjP7wWtd_\"\n  };\n  return __jsx(\"section\", {\n    className: \"section-b-space\"\n  }, __jsx(Container, null, __jsx(\"div\", {\n    className: \"checkout-page\"\n  }, __jsx(\"div\", {\n    className: \"checkout-form\"\n  }, __jsx(Form, {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(Row, null, __jsx(Col, {\n    lg: \"6\",\n    sm: \"12\",\n    xs: \"12\"\n  }, __jsx(\"div\", {\n    className: \"checkout-title\"\n  }, __jsx(\"h3\", null, \"Billing Details\")), __jsx(\"div\", {\n    className: \"row check-out\"\n  }, __jsx(\"div\", {\n    className: \"form-group col-md-6 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"First Name\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"\".concat(errors.firstName ? \"error_border\" : \"\"),\n    name: \"first_name\",\n    ref: register({\n      required: true\n    })\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.firstName && \"First name is required\")), __jsx(\"div\", {\n    className: \"form-group col-md-6 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Last Name\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"\".concat(errors.last_name ? \"error_border\" : \"\"),\n    name: \"last_name\",\n    ref: register({\n      required: true\n    })\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.last_name && \"Last name is required\")), __jsx(\"div\", {\n    className: \"form-group col-md-6 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Phone\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"phone\",\n    className: \"\".concat(errors.phone ? \"error_border\" : \"\"),\n    ref: register({\n      pattern: /\\d+/\n    })\n  }), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.phone && \"Please enter number for phone.\")), __jsx(\"div\", {\n    className: \"form-group col-md-6 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Email Address\"), __jsx(\"input\", (_jsx = {\n    className: \"form-control\"\n  }, _defineProperty(_jsx, \"className\", \"\".concat(errors.email ? \"error_border\" : \"\")), _defineProperty(_jsx, \"type\", \"text\"), _defineProperty(_jsx, \"name\", \"email\"), _defineProperty(_jsx, \"ref\", register({\n    required: true,\n    pattern: /^\\S+@\\S+$/i\n  })), _jsx)), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.email && \"Please enter proper email address .\")), __jsx(\"div\", {\n    className: \"form-group col-md-12 col-sm-12 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Country\"), __jsx(\"select\", {\n    name: \"country\",\n    ref: register({\n      required: true\n    })\n  }, __jsx(\"option\", null, \"India\"), __jsx(\"option\", null, \"South Africa\"), __jsx(\"option\", null, \"United State\"), __jsx(\"option\", null, \"Australia\"))), __jsx(\"div\", {\n    className: \"form-group col-md-12 col-sm-12 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Address\"), __jsx(\"input\", (_jsx2 = {\n    className: \"form-control\"\n  }, _defineProperty(_jsx2, \"className\", \"\".concat(errors.address ? \"error_border\" : \"\")), _defineProperty(_jsx2, \"type\", \"text\"), _defineProperty(_jsx2, \"name\", \"address\"), _defineProperty(_jsx2, \"ref\", register({\n    required: true,\n    min: 20,\n    max: 120\n  })), _defineProperty(_jsx2, \"placeholder\", \"Street address\"), _jsx2)), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.address && \"Please right your address .\")), __jsx(\"div\", {\n    className: \"form-group col-md-12 col-sm-12 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Town/City\"), __jsx(\"input\", (_jsx3 = {\n    className: \"form-control\",\n    type: \"text\"\n  }, _defineProperty(_jsx3, \"className\", \"\".concat(errors.city ? \"error_border\" : \"\")), _defineProperty(_jsx3, \"name\", \"city\"), _defineProperty(_jsx3, \"ref\", register({\n    required: true\n  })), _defineProperty(_jsx3, \"onChange\", setStateFromInput), _jsx3)), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.city && \"select one city\")), __jsx(\"div\", {\n    className: \"form-group col-md-12 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"State / County\"), __jsx(\"input\", (_jsx4 = {\n    className: \"form-control\",\n    type: \"text\"\n  }, _defineProperty(_jsx4, \"className\", \"\".concat(errors.state ? \"error_border\" : \"\")), _defineProperty(_jsx4, \"name\", \"state\"), _defineProperty(_jsx4, \"ref\", register({\n    required: true\n  })), _defineProperty(_jsx4, \"onChange\", setStateFromInput), _jsx4)), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.state && \"select one state\")), __jsx(\"div\", {\n    className: \"form-group col-md-12 col-sm-6 col-xs-12\"\n  }, __jsx(\"div\", {\n    className: \"field-label\"\n  }, \"Postal Code\"), __jsx(\"input\", (_jsx5 = {\n    className: \"form-control\",\n    type: \"text\",\n    name: \"pincode\"\n  }, _defineProperty(_jsx5, \"className\", \"\".concat(errors.pincode ? \"error_border\" : \"\")), _defineProperty(_jsx5, \"ref\", register({\n    pattern: /\\d+/\n  })), _jsx5)), __jsx(\"span\", {\n    className: \"error-message\"\n  }, errors.pincode && \"Required integer\")), __jsx(\"div\", {\n    className: \"form-group col-lg-12 col-md-12 col-sm-12 col-xs-12\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    name: \"create_account\",\n    id: \"account-option\"\n  }), \"\\u2002\", \" \", __jsx(\"label\", {\n    htmlFor: \"account-option\"\n  }, \"Create An Account?\")))), __jsx(Col, {\n    lg: \"6\",\n    sm: \"12\",\n    xs: \"12\"\n  }, cartItems && cartItems.length > 0 > 0 ? __jsx(\"div\", {\n    className: \"checkout-details\"\n  }, __jsx(\"div\", {\n    className: \"order-box\"\n  }, __jsx(\"div\", {\n    className: \"title-box\"\n  }, __jsx(\"div\", null, \"Product \", __jsx(\"span\", null, \"Total\"))), __jsx(\"ul\", {\n    className: \"qty\"\n  }, cartItems.map(function (item, index) {\n    return __jsx(\"li\", {\n      key: index\n    }, item.title, \" \\xD7 \", item.qty, \" \", __jsx(\"span\", null, symbol, item.total));\n  })), __jsx(\"ul\", {\n    className: \"sub-total\"\n  }, __jsx(\"li\", null, \"Subtotal\", \" \", __jsx(\"span\", {\n    className: \"count\"\n  }, symbol, cartTotal)), __jsx(\"li\", null, \"Shipping\", __jsx(\"div\", {\n    className: \"shipping\"\n  }, __jsx(\"div\", {\n    className: \"shopping-option\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    name: \"free-shipping\",\n    id: \"free-shipping\"\n  }), __jsx(\"label\", {\n    htmlFor: \"free-shipping\"\n  }, \"Free Shipping\")), __jsx(\"div\", {\n    className: \"shopping-option\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    name: \"local-pickup\",\n    id: \"local-pickup\"\n  }), __jsx(\"label\", {\n    htmlFor: \"local-pickup\"\n  }, \"Local Pickup\"))))), __jsx(\"ul\", {\n    className: \"total\"\n  }, __jsx(\"li\", null, \"Total\", \" \", __jsx(\"span\", {\n    className: \"count\"\n  }, symbol, cartTotal)))), __jsx(\"div\", {\n    className: \"payment-box\"\n  }, __jsx(\"div\", {\n    className: \"upper-box\"\n  }, __jsx(\"div\", {\n    className: \"payment-options\"\n  }, __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(\"div\", {\n    className: \"radio-option stripe\"\n  }, __jsx(\"input\", {\n    type: \"radio\",\n    name: \"payment-group\",\n    id: \"payment-2\",\n    defaultChecked: true,\n    onClick: function onClick() {\n      return checkhandle(\"stripe\");\n    }\n  }), __jsx(\"label\", {\n    htmlFor: \"payment-2\"\n  }, \"Stripe\"))), __jsx(\"li\", null, __jsx(\"div\", {\n    className: \"radio-option paypal\"\n  }, __jsx(\"input\", {\n    type: \"radio\",\n    name: \"payment-group\",\n    id: \"payment-1\",\n    onClick: function onClick() {\n      return checkhandle(\"paypal\");\n    }\n  }), __jsx(\"label\", {\n    htmlFor: \"payment-1\"\n  }, \"PayPal\", __jsx(\"span\", {\n    className: \"image\"\n  }, __jsx(Media, {\n    src: paypal,\n    alt: \"\"\n  })))))))), cartTotal !== 0 ? __jsx(\"div\", {\n    className: \"text-right\"\n  }, payment === \"stripe\" ? __jsx(\"button\", {\n    type: \"submit\",\n    className: \"btn-solid btn\"\n  }, \"Place Order\") : __jsx(PayPalButton, {\n    paypalOptions: paypalOptions,\n    amount: cartTotal,\n    onPaymentSuccess: onSuccess,\n    onPaymentError: onError,\n    onApprove: onSuccess,\n    onPaymentCancel: onCancel\n  })) : \"\")) : \"\")))))));\n};\n\nexport default CheckoutPage;","map":null,"metadata":{},"sourceType":"module"}